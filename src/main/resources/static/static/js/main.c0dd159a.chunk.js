(this["webpackJsonpreact-test-ts"]=this["webpackJsonpreact-test-ts"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var i,o=n(0),s=n.n(o),r=n(77),a=n.n(r),c=(n(88),n(89),n(3)),h=n(4),l=n(6),u=n(5),d=(n(90),n(91),n(1)),p=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.x1,t=this.props.y1,n=this.props.x2,i=this.props.y2;return Object(d.jsxs)("div",{children:[Object(d.jsx)("svg",{style:{position:"absolute",top:0,left:0,overflow:"visible",width:"100px",height:"100px",zIndex:-10},children:Object(d.jsx)("path",{d:"M ".concat(e,"\n                                ").concat(t,"\n                                \n                                C ").concat((e+n)/2," ").concat(t," \n                                ").concat((e+n)/2," ").concat(i," \n                                \n                                ").concat(n," ").concat(i),onClick:function(e){return console.log("line cliked")},stroke:"#334447",strokeWidth:"6px",fill:"transparent"})}),Object(d.jsx)("svg",{style:{position:"absolute",top:0,left:0,overflow:"visible",width:"100px",height:"100px",zIndex:-10},children:Object(d.jsx)("path",{d:"M ".concat(e,"\n                            ").concat(t,"\n                            \n                            C ").concat((e+n)/2," ").concat(t," \n                            ").concat((e+n)/2," ").concat(i," \n                            \n                            ").concat(n," ").concat(i),onClick:function(e){return console.log("line cliked")},stroke:"#586673",strokeWidth:"4.5px",fill:"transparent"})})]})}}]),n}(o.Component),f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(c.a)(this,n),(o=t.call(this,e)).handleClick=function(e){e.preventDefault(),o.props.parent.portType===i.INPUT?o.handleInputClick(e):o.props.parent.portType===i.OUTPUT&&o.handleOutputClick(e)},o.handleOutputClick=function(e){var t=o.props.parent.parentDimensions,n=t.width,i=o.props.topPosition+.5*t.segmentHeight;o.setState({hasTempLink:!0,x1:n,y1:i,x2:n,y2:i});var s=e.clientX,r=e.clientY,a=function(e){o.setState({x2:o.state.x1+(e.clientX-s)/o.props.currentScale.scale,y2:o.state.y1+(e.clientY-r)/o.props.currentScale.scale})};window.addEventListener("mousemove",a),window.addEventListener("mouseup",(function e(t){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",e),o.setState({hasTempLink:!1}),o.props.storage.handleAttemptToAddLink(o.props.parent,o.props.parent.parent.x+o.state.x2,o.props.parent.parent.y+o.state.y2)}))},o.handleInputClick=function(e){o.props.storage.handleRemoveLinks(o.props.parent)},o.handleTouch=function(e){e.preventDefault(),o.props.parent.portType===i.INPUT?o.handleInputClick(e):o.props.parent.portType===i.OUTPUT&&o.handleOutputTouch(e)},o.handleOutputTouch=function(e){var t=o.props.parent.parentDimensions,n=t.width,i=o.props.topPosition+.5*t.segmentHeight;o.setState({hasTempLink:!0,x1:n,y1:i,x2:n,y2:i});var s=e.touches[0].screenX,r=e.touches[0].screenY,a=function(e){o.setState({x2:o.state.x1+(e.touches[0].screenX-s)/o.props.currentScale.scale,y2:o.state.y1+(e.touches[0].screenY-r)/o.props.currentScale.scale})};window.addEventListener("touchmove",a),window.addEventListener("touchend",(function e(t){window.removeEventListener("touchmove",a),window.removeEventListener("touchend",e),o.setState({hasTempLink:!1}),o.props.storage.handleAttemptToAddLink(o.props.parent,o.props.parent.parent.x+o.state.x2,o.props.parent.parent.y+o.state.y2)}))},o.state={hasTempLink:!1,x1:0,y1:0,x2:0,y2:0},o}return Object(h.a)(n,[{key:"createStyle",value:function(){var e=this.props.parent.parentDimensions,t=this.props.parent.parent.style.segmentStyle,n=e.segmentHeight-2*t.percentageOffsetTop*e.segmentHeight;return{top:this.props.topPosition,height:n,width:n,marginTop:e.segmentHeight*t.percentageOffsetTop,marginLeft:this.props.parent.portType===i.INPUT?-n/2:e.width-n/2,borderRadius:e.segmentHeight/2}}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{onMouseDown:this.handleClick,onTouchStart:this.handleTouch,className:"portView",style:this.createStyle()}),this.state.hasTempLink?Object(d.jsx)(p,{x1:this.state.x1,y1:this.state.y1,x2:this.state.x2,y2:this.state.y2}):null]})}}]),n}(o.Component);!function(e){e[e.INPUT=0]="INPUT",e[e.OUTPUT=1]="OUTPUT",e[e.NO_PORT=2]="NO_PORT"}(i||(i={}));var g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).topPosition=void 0,i.nodeStyle=void 0,i.segmentStyle=void 0,i.topPosition=i.props.segment.index*i.props.segment.parentDimensions.segmentHeight+i.props.segment.parentDimensions.headHeight,i.nodeStyle=e.segment.parent.style,i.segmentStyle=i.nodeStyle.segmentStyle,i}return Object(h.a)(n,[{key:"createOutputLabelStyle",value:function(){var e=this.props.segment.parentDimensions;return{position:"absolute",pointerEvents:"none",textAlign:"right",top:this.topPosition,marginTop:e.segmentHeight*this.segmentStyle.percentageOffsetTop,height:e.segmentHeight-2*this.segmentStyle.percentageOffsetTop*e.segmentHeight,width:e.width*(1-2*this.segmentStyle.percentageOffsetLeft)-6,left:"-3px",marginLeft:e.width*this.segmentStyle.percentageOffsetLeft,padding:0,display:"flex",justifyContent:"flex-end",alignItems:"center",fontFamily:this.nodeStyle.fontFamily,fontWeight:this.nodeStyle.labelsFontWeight,fontSize:e.segmentHeight*this.segmentStyle.fontSizeToSegmentHeight,color:this.nodeStyle.textColor,userSelect:"none"}}},{key:"createInputLabelStyle",value:function(){var e=this.props.segment.parentDimensions;return{position:"absolute",pointerEvents:"none",textAlign:"left",top:this.topPosition,marginTop:e.segmentHeight*this.segmentStyle.percentageOffsetTop,height:e.segmentHeight-2*this.segmentStyle.percentageOffsetTop*e.segmentHeight,width:e.width*(1-1.25*this.segmentStyle.percentageOffsetLeft)-6,left:"6px",marginLeft:e.width*this.segmentStyle.percentageOffsetLeft,padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",overflow:"hidden",fontFamily:this.nodeStyle.fontFamily,fontWeight:this.nodeStyle.labelsFontWeight,fontSize:e.segmentHeight*this.segmentStyle.fontSizeToSegmentHeight,color:this.nodeStyle.textColor,userSelect:"none"}}},{key:"createLabelStyle",value:function(){var e=this.props.segment.parentDimensions;return{position:"absolute",padding:0,paddingLeft:"6px",top:this.topPosition,marginTop:e.segmentHeight*this.segmentStyle.percentageOffsetTop,height:e.segmentHeight*(1-2*this.segmentStyle.percentageOffsetTop),width:e.width*(1-2*this.segmentStyle.percentageOffsetLeft)-6,marginLeft:e.width*this.segmentStyle.percentageOffsetLeft,overflow:"hidden",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",fontFamily:this.nodeStyle.fontFamily,fontWeight:this.nodeStyle.labelsFontWeight,color:this.nodeStyle.textColor,userSelect:"none",pointerEvents:"none",fontSize:e.segmentHeight*this.segmentStyle.fontSizeToSegmentHeight,whiteSpace:"nowrap"}}},{key:"createPort",value:function(){return this.props.segment.portType!==i.NO_PORT?Object(d.jsx)(f,{parent:this.props.segment,topPosition:this.topPosition,storage:this.props.storage,currentScale:this.props.currentScale}):Object(d.jsx)("div",{})}},{key:"width",get:function(){return this.props.segment.parentDimensions.width*(1-2*this.segmentStyle.percentageOffsetLeft)}},{key:"height",get:function(){return this.props.segment.parentDimensions.segmentHeight*(1-2*this.segmentStyle.percentageOffsetTop)}},{key:"offsetLeft",get:function(){return this.props.segment.parentDimensions.width*this.segmentStyle.percentageOffsetLeft}},{key:"offsetTop",get:function(){return this.props.segment.parentDimensions.segmentHeight*this.segmentStyle.percentageOffsetTop}}]),n}(o.Component),v=function(){function e(t,n,i,o){Object(c.a)(this,e),this._parent=null,this._index=null,this._parentDimensions=null,this._value=void 0,this._portType=void 0,this._label=void 0,this._spacesOccupied=void 0,this._value=n,this._portType=i,this._label=t,this._spacesOccupied=o||1}return Object(h.a)(e,[{key:"initialize",value:function(e,t,n){this.parent=e,this._index=t,this._parentDimensions=n}},{key:"calcPortTopOffsetToCenter",value:function(){if(null==this._parentDimensions||null==this._index||null==this._parent)throw new Error;var e=this._parentDimensions;return this._parent.y+e.headHeight+e.segmentHeight*(this._index+.5)}},{key:"calcPortLeftOffsetToCenter",value:function(){if(null==this._parentDimensions||null==this._index||null==this._parent)throw new Error;switch(this.portType){case i.INPUT:return this._parent.x;case i.OUTPUT:return this._parent.x+this._parentDimensions.width;case i.NO_PORT:return this._parent.x}}},{key:"isInitialized",get:function(){return!(null==this._parent||null==this._index||null==this._parentDimensions)}},{key:"parent",get:function(){if(null==this._parent)throw new Error("Segment is not initialized by node");return this._parent},set:function(e){this._parent=e}},{key:"value",get:function(){return this._value},set:function(e){this._value=e}},{key:"index",get:function(){if(null==this._index)throw new Error("Segment is not initialized by node");return this._index}},{key:"portType",get:function(){return this._portType}},{key:"parentDimensions",get:function(){if(null==this._parentDimensions)throw new Error("Segment is not initialized by node");return this._parentDimensions}},{key:"label",get:function(){return this._label}},{key:"spacesOccupied",get:function(){return this._spacesOccupied}}]),e}(),m=g,b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{})}}]),n}(m),w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.call(this,"",null,i.NO_PORT)}return Object(h.a)(n,[{key:"createView",value:function(e,t){return Object(d.jsx)(b,{storage:e,currentScale:t,segment:this},this.index)}}]),n}(v),y=function e(){Object(c.a)(this,e),this.percentageOffsetTop=.15,this.percentageOffsetLeft=.08,this.fontSizeToSegmentHeight=.55},j=function(){function e(t,n,i,o){Object(c.a)(this,e),this._width=void 0,this._headHeight=void 0,this._segmentHeight=void 0,this._footerHeight=void 0,this._width=t,this._headHeight=n,this._segmentHeight=i,this._footerHeight=o}return Object(h.a)(e,[{key:"equals",value:function(e){return this._width===e.width&&this._headHeight===e.headHeight&&this._segmentHeight===e.segmentHeight&&this._footerHeight===e.footerHeight}},{key:"clone",value:function(){return new e(this._width,this._headHeight,this._segmentHeight,this._footerHeight)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"headHeight",get:function(){return this._headHeight},set:function(e){this._headHeight=e}},{key:"segmentHeight",get:function(){return this._segmentHeight},set:function(e){this._segmentHeight=e}},{key:"footerHeight",get:function(){return this._footerHeight},set:function(e){this._footerHeight=e}}]),e}(),x=function(){function e(t,n,i,o){Object(c.a)(this,e),this._selected=!1,this._rolledUp=!1,this._aboutToDelete=!1,this._nodeStyle=S,this._dimensions=void 0,this._x=void 0,this._y=void 0,o&&(this._nodeStyle=o),this._dimensions=t,this._x=n,this._y=i}return Object(h.a)(e,[{key:"dimensions",get:function(){return this._dimensions}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e}},{key:"nodeStyle",get:function(){return this._nodeStyle}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"rolledUp",get:function(){return this._rolledUp},set:function(e){this._rolledUp=e}},{key:"aboutToDelete",get:function(){return this._aboutToDelete},set:function(e){this._aboutToDelete=e}}]),e}(),O=function(){function e(t,n,i,o,s,r,a,h){var l=this;Object(c.a)(this,e),this.id=void 0,this.name=void 0,this._valueFunction=void 0,this._viewProperties=void 0,this._segments=[],this._links=[],this.id=t,this.name=n,this._valueFunction=r,this._viewProperties=new x(s,i,o,a),null!=h&&h.forEach((function(e){return l.addSegment(e)}))}return Object(h.a)(e,[{key:"addSegment",value:function(e){if(e.isInitialized)throw new Error("Segment can belong only to one Node");if(e.initialize(this,this._segments.length,this.dimensions),this._segments.push(e),e.spacesOccupied>1)for(var t=0;t<e.spacesOccupied-1;t++){var n=new w;n.initialize(this,this._segments.length,this.dimensions),this._segments.push(n)}}},{key:"addLink",value:function(e){this._links.push(e)}},{key:"removeLink",value:function(e){for(var t=this.links.filter((function(e){return null!==e})),n=0;n<t.length;n++)if(t[n].equals(e)){delete t[n];break}t=t.filter((function(e){return null!==e&&void 0!==e})),this._links=t}},{key:"getNodeValue",value:function(e){return this._valueFunction.getNodeValue(this,e)}},{key:"getSegmentLinks",value:function(e){var t=[];return this._segments[e].portType===i.OUTPUT?this._links.forEach((function(n){n.outputSegment.index===e&&t.push(n)})):this._segments[e].portType===i.INPUT&&this._links.forEach((function(n){n.inputSegment.index===e&&t.push(n)})),t}},{key:"checkIfPointInsideNode",value:function(e,t){var n=this._viewProperties,i=this._viewProperties.dimensions;return e>n.x&&e<n.x+i.width&&t>n.y&&t<n.y+this.height}},{key:"outputLinkNumber",get:function(){var e=this,t=0;return this._links.forEach((function(n){return t=n.outputSegment.parent.id===e.id?t+1:t})),t}},{key:"links",get:function(){return this._links}},{key:"x",get:function(){return this._viewProperties.x},set:function(e){this._viewProperties.x=e}},{key:"y",get:function(){return this._viewProperties.y},set:function(e){this._viewProperties.y=e}},{key:"dimensions",get:function(){return this._viewProperties.dimensions}},{key:"height",get:function(){var e=this._viewProperties.dimensions;return e.headHeight+e.footerHeight+this.segments.length*e.segmentHeight}},{key:"segments",get:function(){return this._segments}},{key:"nodeStyle",get:function(){return this._viewProperties.nodeStyle}},{key:"style",get:function(){return this._viewProperties.nodeStyle}},{key:"viewProperties",get:function(){return this._viewProperties}}]),e}(),S=new function e(){Object(c.a)(this,e),this.allowHeaderColorOverwriting=!1,this.allowPortColorOverwriting=!1,this.nodeBackgroundColor="#54606d",this.headerColor="#299b91",this.borderColor="#283537",this.segmentColor="#3c454f",this.inputPortColor="#299b91",this.outputPortColor="#299b91",this.textColor="#f7f7f7",this.fontFamily="Ubuntu, sans-serif",this.headerFontWeight=400,this.labelsFontWeight=300,this.segmentStyle=new y},k=function e(t,n,i){Object(c.a)(this,e),this.x=void 0,this.y=void 0,this.selected=void 0,this.x=t,this.y=n,this.selected=i};var L,T,C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;Object(c.a)(this,n),(i=t.call(this,e))._nodeBackgroundRef=s.a.createRef(),i.width=void 0,i.height=void 0,i.nodeStyle=void 0,i.lastTouchTime=0,i.handleDeleteNodeOnKeyPress=function(e){!i.state.selected||"Backspace"!==e.code&&"Delete"!==e.code||i.props.storage.handleRemoveNode(i.props.node)},i.handleClick=function(e){e.preventDefault(),i.setState({selected:!0}),window.addEventListener("mousedown",i.unselect),i.props.storage.handleUpdateNode(i.props.node);var t=e.clientX,n=e.clientY,o=function(e){var o=i.state.x-(t-e.clientX)/i.props.canvasViewProps.scale,s=i.state.y-(n-e.clientY)/i.props.canvasViewProps.scale;i.setState({x:o,y:s}),i.props.node.x=o,i.props.node.y=s,t=e.clientX,n=e.clientY,i.props.storage.handleUpdateNode(i.props.node)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",(function e(t){window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",e)}))},i.unselect=function(e){var t=D.keys.includes("ShiftLeft");if(i._nodeBackgroundRef.current&&!t){var n=i._nodeBackgroundRef.current.getBoundingClientRect();(e.clientX<n.left||e.clientX>n.left+n.width||e.clientY<n.top||e.clientY>n.top+n.height)&&(i.setState({selected:!1}),window.removeEventListener("click",i.unselect))}else t||(i.setState({selected:!1}),window.removeEventListener("click",i.unselect))},i.handleTouch=function(e){e.preventDefault(),i.setState({selected:!0});var t=Date.now();if(i.props.node.viewProperties.aboutToDelete)i.props.storage.handleRemoveNode(i.props.node);else{i.lastTouchTime-t<1e3&&(i.props.node.viewProperties.aboutToDelete=!0),window.addEventListener("touchstart",i.touchUnselect),i.props.storage.handleUpdateNode(i.props.node);var n=e.touches[0].clientX,o=e.touches[0].clientY,s=function(e){var t=e.touches[0],s=i.state.x-(n-t.screenX)/i.props.canvasViewProps.scale,r=i.state.y-(o-t.screenY)/i.props.canvasViewProps.scale;i.setState({x:s,y:r}),i.props.node.x=s,i.props.node.y=r,n=t.screenX,o=t.screenY,i.props.storage.handleUpdateNode(i.props.node)};window.addEventListener("touchmove",s),window.addEventListener("touchend",(function e(t){window.removeEventListener("touchmove",s),window.removeEventListener("touchend",e)}))}},i.touchUnselect=function(e){var t=D.keys.includes("ShiftLeft");if(i._nodeBackgroundRef.current&&!t){var n=i._nodeBackgroundRef.current.getBoundingClientRect();(e.clientX<n.left||e.clientX>n.left+n.width||e.clientY<n.top||e.clientY>n.top+n.height)&&(i.setState({selected:!1}),window.removeEventListener("click",i.touchUnselect))}else t||(i.props.node.viewProperties.aboutToDelete=!1,i.setState({selected:!1}),window.removeEventListener("touchstart",i.touchUnselect))};var o=i.props.node;return i.width=o.dimensions.width,i.height=o.dimensions.headHeight+o.dimensions.segmentHeight*o.segments.length+o.dimensions.footerHeight,i.nodeStyle=e.node.style,i.state=new k(i.props.node.x,i.props.node.y,!!e.selected&&e.selected),i}return Object(h.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleDeleteNodeOnKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleDeleteNodeOnKeyPress)}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"nodeWrapper",style:{top:this.state.y+"px",left:this.state.x+"px"},children:[Object(d.jsx)("div",{style:{position:"absolute",top:this.props.node.dimensions.headHeight}}),this.props.node.segments.map((function(t){return t.createView(e.props.storage,e.props.canvasViewProps)})),Object(d.jsx)("div",{ref:this._nodeBackgroundRef,className:"nodeBackground",onMouseDown:this.handleClick,onTouchStart:this.handleTouch,style:{width:this.width+"px",height:this.height+"px",borderRadius:this.props.node.dimensions.headHeight,backgroundColor:this.nodeStyle.nodeBackgroundColor,boxShadow:"0 0 3px 2px "+(this.props.node.viewProperties.aboutToDelete?"#AA0000":this.state.selected?this.nodeStyle.headerColor:"#555e66")},children:Object(d.jsx)("span",{draggable:"false",className:"header",style:{width:this.props.node.dimensions.width,height:this.props.node.dimensions.headHeight,color:this.nodeStyle.textColor,fontWeight:this.nodeStyle.headerFontWeight,backgroundColor:this.nodeStyle.headerColor},children:this.props.node.name})})]})}}]),n}(o.PureComponent),_=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(e){e.preventDefault()},e}return Object(h.a)(n,[{key:"createSVGStyle",value:function(){return{position:"absolute",top:0,left:0,overflow:"visible",width:"100px",height:"100px",zIndex:-10,pointerEvents:"none"}}},{key:"render",value:function(){var e=this.props.link.outputSegment.calcPortLeftOffsetToCenter(),t=this.props.link.outputSegment.calcPortTopOffsetToCenter(),n=this.props.link.inputSegment.calcPortLeftOffsetToCenter(),i=this.props.link.inputSegment.calcPortTopOffsetToCenter();return Object(d.jsxs)("div",{style:{width:0,height:0},children:[Object(d.jsx)("svg",{style:this.createSVGStyle(),children:Object(d.jsx)("path",{d:"M ".concat(e,"\n                                ").concat(t,"\n                                \n                                C ").concat((e+n)/2," ").concat(t," \n                                ").concat((e+n)/2," ").concat(i," \n                                \n                                ").concat(n," ").concat(i),onMouseDown:this.handleClick,onClick:function(e){return e.preventDefault()},stroke:"#334447",strokeWidth:"6px",fill:"transparent"})}),Object(d.jsx)("svg",{style:this.createSVGStyle(),children:Object(d.jsx)("path",{d:"M ".concat(e,"\n                                ").concat(t,"\n                                \n                                C ").concat((e+n)/2," ").concat(t," \n                                ").concat((e+n)/2," ").concat(i," \n                                \n                                ").concat(n," ").concat(i),onMouseDown:this.handleClick,onClick:function(e){return e.preventDefault()},stroke:"#586673",strokeWidth:"4.5px",fill:"transparent"})})]})}}]),n}(o.Component),P=function(){function e(t,n){if(Object(c.a)(this,e),this._outputSegment=void 0,this._inputSegment=void 0,t.portType!==i.OUTPUT||n.portType!==i.INPUT)throw new Error("Invalid port's types");this._outputSegment=t,this._inputSegment=n}return Object(h.a)(e,[{key:"equals",value:function(e){return this._outputSegment.index===e.outputSegment.index&&this._outputSegment.parent.id===e.outputSegment.parent.id&&this._inputSegment.index===e.inputSegment.index&&this._inputSegment.parent.id===e.inputSegment.parent.id}},{key:"outputSegment",get:function(){return this._outputSegment}},{key:"inputSegment",get:function(){return this._inputSegment}}]),e}(),E=_,D=(n(93),{keys:[]}),N=function e(t,n,i){Object(c.a)(this,e),this.viewProperties=void 0,this.nodes=void 0,this.links=void 0,this.viewProperties=t,this.nodes=n,this.links=i},M=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).storageListener=function(e,t){return i.setState({nodes:e,links:t})},i.listenerId=0,i.canvasRef=s.a.createRef(),i.handleMove=function(e){var t=Date.now(),n=e.clientX,o=e.clientY,s=function(e){Date.now()-t>5&&(e.preventDefault(),i.state.viewProperties.shiftLeft=i.state.viewProperties.shiftLeft-(n-e.clientX)/i.state.viewProperties.scale,i.state.viewProperties.shiftTop=i.state.viewProperties.shiftTop-(o-e.clientY)/i.state.viewProperties.scale,n=e.clientX,o=e.clientY,t=Date.now(),i.setState({viewProperties:i.state.viewProperties}))};window.addEventListener("mousemove",s),window.addEventListener("mouseup",(function(){return window.removeEventListener("mousemove",s)}))},i.handleScroll=function(e){var t=0===e.deltaMode?e.deltaY:50*e.deltaY,n=i.state.viewProperties.scale-.001*t;n=n<.15?.15:n>20?20:n,i.state.viewProperties.scale=n,i.setState({viewProperties:i.state.viewProperties})},i.handleKeyDown=function(e){D.keys.includes(e.code)||D.keys.push(e.code)},i.handleKeyUp=function(e){D.keys=D.keys.filter((function(t){return t!==e.code}))},i.preventDefault=function(e){return e.preventDefault(e),e.stopPropagation(),!1},i.disableScroll=function(e){window.addEventListener("mousewheel",i.preventDefault,{passive:!1}),window.addEventListener("touchmove",i.preventDefault,{passive:!1})},i.enableScroll=function(e){window.removeEventListener("mousewheel",i.preventDefault),window.removeEventListener("touchmove",i.preventDefault)},i.handleTouch=function(e){i.disableScroll(e),1==e.touches.length?i.handleTouchMove(e):i.handleTouchScale(e)},i.handleTouchMove=function(e){var t=Date.now(),n=e.touches[0].screenX,o=e.touches[0].screenY,s=function(e){if(e.touches.length>1)r(e);else if(Date.now()-t>5){var s=i.state.viewProperties,a=e.touches[0];s.shiftTop+=(a.screenY-o)/s.scale,o=a.screenY,s.shiftLeft+=(a.screenX-n)/s.scale,n=a.screenX,t=Date.now(),i.setState({viewProperties:s})}},r=function e(t){window.removeEventListener("touchend",e),window.removeEventListener("touchmove",s)};window.addEventListener("touchmove",s),window.addEventListener("touchend",r)},i.handleTouchScale=function(e){var t=Date.now(),n=e.touches[0].screenX,o=e.touches[0].screenY,s=e.touches[1].screenX,r=e.touches[1].screenY,a=Math.sqrt(Math.pow(n-s,2)+Math.pow(o-r,2)),c=i.state.viewProperties.scale,h=function(e){if(Date.now()-t>5){n=e.touches[0].screenX,o=e.touches[0].screenY,s=e.touches[1].screenX,r=e.touches[1].screenY;var h=Math.sqrt(Math.pow(n-s,2)+Math.pow(o-r,2));i.state.viewProperties.scale=c*(h/a),t=Date.now(),i.setState({viewProperties:i.state.viewProperties})}};window.addEventListener("touchmove",h),window.addEventListener("touchend",(function e(t){t.touches.length<2&&(window.removeEventListener("touchmove",h),window.removeEventListener("touchend",e))}))},i.state=new N(e.viewProps,e.storage.getNodes(),e.storage.getLinks()),i}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(){if(this.canvasRef.current){var e=this.canvasRef.current.getBoundingClientRect();this.props.viewProps.width=e.width,this.props.viewProps.height=e.height}}},{key:"componentDidMount",value:function(){if(this.listenerId=this.props.storage.addUpdateListener(this.storageListener),this.canvasRef.current){var e=this.canvasRef.current.getBoundingClientRect();this.props.viewProps.width=e.width,this.props.viewProps.height=e.height}}},{key:"componentWillUnmount",value:function(){this.props.storage.removeUpdateListener(this.listenerId)}},{key:"render",value:function(){var e=this,t=0;return Object(d.jsxs)("div",{onMouseEnter:this.disableScroll,onMouseLeave:this.enableScroll,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,ref:this.canvasRef,className:"Background",onWheel:this.handleScroll,style:{width:"100%",height:"100%",overflow:"hidden",position:"absolute",top:0,left:0,margin:0,padding:0},draggable:"false",unselectable:"on",children:[Object(d.jsxs)("div",{style:{position:"absolute",backgroundColor:"#ddaaaa",left:"50%",top:"50%",transform:"scale(".concat(this.state.viewProperties.scale,") translate(").concat(this.state.viewProperties.shiftLeft,"px, \n                    ").concat(this.state.viewProperties.shiftTop,"px)"),transition:"transform 0.05s 0 linear"},children:[this.state.nodes.map((function(t){return Object(d.jsx)(C,{node:t,canvasViewProps:e.state.viewProperties,storage:e.props.storage},t.id)})),this.state.links.map((function(e){return Object(d.jsx)(E,{link:e},t++)}))]}),Object(d.jsx)("div",{style:{width:"inherit",height:"inherit"},onMouseDown:this.handleMove,onTouchStart:this.handleTouch,onTouchEnd:this.enableScroll,onTouchCancel:this.enableScroll})]})}}]),n}(o.Component),H=(n(94),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).ref=s.a.createRef(),i.paintCanvas=function(e){if(!i.ref.current)throw new Error("Output node has to be connected to node returning image");var t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0);var n,o,s=i.ref.current,r=i.ref.current.closest("div").clientWidth,a=i.ref.current.closest("div").clientHeight;r/e.width*e.height<a?(n=r,o=r/e.width*e.height):(o=a,n=a/e.height*e.width),s.width=r,s.height=a,s.getContext("2d").drawImage(t,0,0,e.width,e.height,(r-n)/2,(a-o)/2,n,o),i.setState({lastUpdate:Date.now()})},i.state={lastUpdate:0},i}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(Date.now()-this.state.lastUpdate>1e3){for(var i=null,o=this.props.nodes,s=0;s<o.length;s++)if("Output"===o[s].name){i=o[s];break}this.setState({lastUpdate:Date.now()}),null!==i&&this.paintOutput(i)}}},{key:"paintOutput",value:function(e){var t=this;try{e.getNodeValue(0).then((function(e){return t.paintCanvas(e)}),(function(e){return console.log("something went wrong")}))}catch(n){console.log(n)}}},{key:"render",value:function(){return Object(d.jsx)("canvas",{ref:this.ref})}}]),n}(o.Component)),R=(n(95),function e(t,n){Object(c.a)(this,e),this.label=void 0,this.onClick=void 0,this.label=t,this.onClick=n}),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).handleMouseEnter=function(){i.setState({hover:!0}),document.body.style.cursor="pointer"},i.handleMouseLeave=function(){i.setState({hover:!1}),document.body.style.cursor="auto"},i.state={hover:!1},i}return Object(h.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{onClick:this.props.onClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:{position:"relative",height:this.props.height?this.props.height:"80%",marginTop:"auto",marginBottom:"auto",paddingLeft:"10px",paddingRight:"10px",backgroundColor:"inherit",color:this.state.hover?Ae.headerColor:Ae.color,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(d.jsx)("span",{children:this.props.label})})}}]),n}(o.Component),U=(n(96),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).ref=s.a.createRef(),i.handleMouseEnter=function(){i.setState({hover:!0}),document.body.style.cursor="pointer"},i.handleMouseLeave=function(){i.setState({hover:!1}),document.body.style.cursor="auto"},i.state={hover:!1},i}return Object(h.a)(n,[{key:"calcDivWith",value:function(){if(this.ref.current){var e=this.ref.current;return console.log(e.clientWidth),e.clientWidth}return 100}},{key:"render",value:function(){var e=this,t=0;return Object(d.jsxs)("div",{ref:this.ref,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:function(){return e.setState({hover:!1})},style:{position:"relative",height:this.props.height?this.props.height:"100%",marginTop:"auto",marginBottom:"auto",paddingLeft:"10px",paddingRight:"10px",backgroundColor:"inherit",color:this.state.hover?Ae.headerColor:Ae.color,display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(d.jsx)("span",{children:this.props.label}),this.state.hover?Object(d.jsx)("li",{className:"scroll",style:{position:"absolute",paddingTop:"5%",top:"100%",left:0,maxHeight:"600%",overflow:"auto",minWidth:this.calcDivWith(),listStyle:"none",zIndex:1e4,backgroundColor:"inherit",borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px"},children:this.props.subButtonsContent.map((function(e){return Object(d.jsx)(B,{content:e.label,clickEvent:e.onClick},t++)}))}):Object(d.jsx)("div",{})]})}}]),n}(o.Component)),B=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).handleMouseEnter=function(){i.setState({hover:!0})},i.handleMouseLeave=function(){i.setState({hover:!1})},i.state={hover:!1},i}return Object(h.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("ul",{onClick:this.props.clickEvent,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:{width:"100%",padding:0,textAlign:"center",marginBottom:"10px",marginTop:0,color:this.state.hover?Ae.headerColor:Ae.color},children:[Object(d.jsx)("div",{style:{width:"80%",marginLeft:"10%",marginBottom:"inherit",borderTop:"2px dotted "+Ae.headerColor}}),this.props.content]})}}]),n}(o.Component),V=n(35),W=n.n(V),z=n(46),X=function(e){var t=e.toString(),n=new Blob(["("+t+")()"]);return new Worker(URL.createObjectURL(n))},F=function(){self.addEventListener("message",(function(e){for(var t,n,i,o,s,r=e.data.capValue,a=e.data.capMax,c=e.data.imgArray,h=0;h<c.length;h+=4)if(n=(t=h)+3,i=Math.max(Math.max(c[h],c[h+1]),c[h+2]),!a&&i<r||a&&i>r)if(0===i)for(;t<n;t++)c[t]=r;else for(o=r/i;t<n;t++)s=Math.floor(c[t]*o),c[t]=s<0?0:s>255?255:s;postMessage(c,[c.buffer])}))},A=function e(t,n){Object(c.a)(this,e),this.capValue=void 0,this.capMax=void 0,this.capValue=t,this.capMax=n},Y=function(){function e(t){Object(c.a)(this,e),this.params=void 0,this.worker=X(F),this._isBusy=!1,this.params=t}return Object(h.a)(e,[{key:"isBusy",value:function(){return this._isBusy}},{key:"run",value:function(e){var t=this;return this._isBusy?Promise.reject("Worker is busy"):(this._isBusy=!0,new Promise((function(n,i){t.worker.onmessage=function(i){e.data=i.data,t._isBusy=!1,n(e)},t.worker.onmessageerror=function(e){t._isBusy=!1,i("Worker error")},t.worker.onerror=function(e){t._isBusy=!1,i("Worker error")},t.worker.postMessage({imgArray:e.data,capValue:t.params.capValue,capMax:t.params.capMax},[e.data.buffer])})))}},{key:"getParams",value:function(){return this.params}},{key:"setParams",value:function(e){this.params=e}}]),e}(),q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{draggable:"false",style:this.createOutputLabelStyle(),children:this.props.segment.label}),this.createPort()]})}}]),n}(m),K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e,null,i.OUTPUT)}return Object(h.a)(n,[{key:"createView",value:function(e,t){return Object(d.jsx)(q,{storage:e,segment:this,currentScale:t},this.index)}}]),n}(v),G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{draggable:"false",style:this.createInputLabelStyle(),children:this.props.segment.label}),this.createPort()]})}}]),n}(m),J=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e,null,i.INPUT)}return Object(h.a)(n,[{key:"createView",value:function(e,t){return Object(d.jsx)(G,{storage:e,segment:this,currentScale:t},this.index)}}]),n}(v),Q=(n(98),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).handleClick=function(){if(!i.state.selected){var e=!1;i.setState({selected:!0});window.addEventListener("click",(function t(n){e?(i.setState({selected:!1}),window.removeEventListener("click",t),e=!1):e=!0}))}},i.handleMouseEnter=function(){document.body.style.cursor="pointer"},i.handleMouseLeave=function(){document.body.style.cursor="auto"},i.handleChange=function(e){i.setState({selectedOption:e}),i.props.segment.value=e},i.state={selectedOption:e.options[0],selected:!1},i}return Object(h.a)(n,[{key:"createSelectStyle",value:function(){return{position:"absolute",top:this.topPosition,marginTop:this.offsetTop,marginLeft:this.offsetLeft,width:this.width,height:this.height,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:this.nodeStyle.segmentColor,border:"1px solid "+this.nodeStyle.borderColor,borderTopLeftRadius:this.height/2,borderTopRightRadius:this.height/2,borderBottomLeftRadius:this.state.selected?0:this.height/2,borderBottomRightRadius:this.state.selected?0:this.height/2,fontFamily:this.nodeStyle.fontFamily,fontSize:this.segmentStyle.fontSizeToSegmentHeight*this.props.segment.parentDimensions.segmentHeight,fontWeight:this.nodeStyle.labelsFontWeight,color:this.nodeStyle.textColor,userSelect:"none",boxShadow:this.state.selected?"0 0 2px 1px "+this.nodeStyle.borderColor:"none"}}},{key:"render",value:function(){var e=this,t=0;return Object(d.jsxs)("div",{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:this.createSelectStyle(),children:[Object(d.jsx)("span",{style:{position:"absolute",zIndex:this.state.selected?1e7:"inherit"},children:this.state.selectedOption}),Object(d.jsx)("span",{style:{marginLeft:"85%",color:this.nodeStyle.headerColor,fontSize:this.segmentStyle.fontSizeToSegmentHeight*this.props.segment.parentDimensions.segmentHeight*.8,font:"initial"},children:this.state.selected?"\u2b9c":"\u2b9f"}),this.state.selected?Object(d.jsxs)("li",{className:"scroll",onScroll:function(e){return e.stopPropagation()},style:{position:"absolute",paddingTop:"5%",top:"95%",left:-1,maxHeight:"1000%",border:"1px solid "+this.nodeStyle.borderColor,borderTop:"none",boxSizing:"content-box",overflow:"auto",minWidth:this.width,listStyle:"none",zIndex:1e4,backgroundColor:"inherit",borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px",boxShadow:"0 2px 2px 1px "+this.nodeStyle.borderColor},children:[this.props.options.filter((function(t){return t!==e.state.selectedOption})).map((function(n){return Object(d.jsx)(Z,{content:n,clickListener:e.handleChange,asLabel:!1},t++)})),Object(d.jsx)(Z,{content:this.props.segment.label,clickListener:function(){},asLabel:!0})]}):Object(d.jsx)("div",{})]})}}]),n}(m)),Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).handleMouseEnter=function(){i.setState({hover:!0})},i.handleMouseLeave=function(){i.setState({hover:!1})},i.state={hover:!1},i}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("ul",{onClick:function(){return e.props.clickListener(e.props.content)},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:{width:"100%",padding:0,textAlign:"center",marginTop:this.props.asLabel?"3px":0,marginBottom:this.props.asLabel?"8px":"3px",fontWeight:this.props.asLabel?400:"inherit",color:this.state.hover&&!this.props.asLabel?Ae.headerColor:Ae.color},children:[Object(d.jsx)("div",{style:{width:this.props.asLabel?"80%":"70%",marginLeft:this.props.asLabel?"10%":"15%",padding:0,marginBottom:"inherit",borderTop:(this.props.asLabel,"2px "+(this.props.asLabel?"solid ":"dotted ")+Ae.headerColor)}}),this.props.content]})}}]),n}(o.Component),$=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,o,s){var r;return Object(c.a)(this,n),(r=t.call(this,e,o,i.NO_PORT)).options=void 0,r.options=s,r}return Object(h.a)(n,[{key:"createView",value:function(e,t){return Object(d.jsx)(Q,{segment:this,storage:e,currentScale:t,options:this.options},this._index)}}]),n}(v);!function(e){e.RED="red",e.GREEN="green",e.BLUE="blue",e.ALPHA="alpha"}(L||(L={})),function(e){e[e.RGB=0]="RGB",e[e.HSV=1]="HSV"}(T||(T={}));var ee=function(){function e(t,n,i,o,s){Object(c.a)(this,e),this._numberOfChannels=void 0,this._channels=void 0,this._data=void 0,this._width=void 0,this._height=void 0,this._colorSpace=void 0,this._channels=s||[!0,!0,!0,!0],this._data=t,this._width=n,this._height=i;var r=0;this._channels.forEach((function(e){return r=e?r+1:r})),this._numberOfChannels=r,this._colorSpace=o||T.RGB}return Object(h.a)(e,[{key:"numberOfChannels",get:function(){return this._numberOfChannels}},{key:"channels",get:function(){return this._channels},set:function(e){this._channels=e;var t=0;e.forEach((function(e){return t=e?t+1:t})),this._numberOfChannels=t}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"colorSpace",get:function(){return this._colorSpace},set:function(e){this._colorSpace=e}}]),e}(),te=function e(t,n){if(Object(c.a)(this,e),this.id=void 0,this.selected=void 0,this.rolledUp=void 0,this.nodeDimensions=void 0,this.x=void 0,this.y=void 0,this.fileToLoadList=[],this.id=t.id,this.selected=t.viewProperties.selected,this.rolledUp=t.viewProperties.rolledUp,this.x=t.x,this.y=t.y,n.equals(t.dimensions))this.nodeDimensions=null;else{var i=t.dimensions;this.nodeDimensions=new j(i.width,i.headHeight,i.segmentHeight,i.footerHeight)}},ne=(n(99),function e(t,n){Object(c.a)(this,e),this.fillPercentage=void 0,this.focused=void 0,this.fillPercentage=t,this.focused=n}),ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).calculateFill=function(){return(i.props.segment.value-i.props.minValue)/(i.props.maxValue-i.props.minValue)},i.handleMouseDown=function(e){var t=e.target.getBoundingClientRect(),n=e.clientX,o=e.clientX,s=t.right-t.x;document.body.style.cursor="none";var r=function(e){var n=i.state.fillPercentage+(e.clientX-o)/s;n=n>1?1:n<0?0:n;var r=(i.props.maxValue-i.props.minValue)*n+i.props.minValue;i.props.segment.value=Math.floor(r*i.props.precision)/i.props.precision,o=e.clientX>t.right?t.right:e.clientX<t.x?t.x:e.clientX,i.setState({fillPercentage:n})},a=function e(n){(n.clientX<t.left||n.clientX>t.left+t.width||n.clientY<t.top||n.clientY>t.top+t.height)&&(window.removeEventListener("mousedown",e),i.setState({focused:!1}))};window.addEventListener("mousemove",r),window.addEventListener("mouseup",(function e(t){t.clientX===n&&(i.setState({focused:!0}),window.addEventListener("mousedown",a)),document.body.style.cursor="auto",window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",e)}))},i.handleTouchDown=function(e){var t=e.touches[0],n=e.target.getBoundingClientRect();console.log(n.top);e.target;var o=t.screenX,s=t.screenX,r=n.right-n.x;document.body.style.cursor="none";var a=function(e){t=e.touches[0];var o=i.state.fillPercentage+(t.screenX-s)/r;o=o>1?1:o<0?0:o;var a=(i.props.maxValue-i.props.minValue)*o+i.props.minValue;i.props.segment.value=Math.floor(a*i.props.precision)/i.props.precision,s=t.screenX>n.right?n.right:t.screenX<n.x?n.x:t.screenX,i.setState({fillPercentage:o})},c=function e(t){"TemporaryNumberInput"!==t.target.className.split(" ")[1]&&(window.removeEventListener("touchstart",e),i.setState({focused:!1}))};window.addEventListener("touchmove",a),window.addEventListener("touchend",(function e(t){s===o&&(i.setState({focused:!0}),window.addEventListener("touchstart",c)),document.body.style.cursor="auto",window.removeEventListener("touchmove",a),window.removeEventListener("touchend",e)}))},i.handleChange=function(e){console.log(e.target.value),i.props.segment.value=Number.parseFloat(e.target.value),i.setState({fillPercentage:i.calculateFill()})},i.state=new ne(i.calculateFill(),!1),i}return Object(h.a)(n,[{key:"createSliderStyle",value:function(){return{position:"absolute",marginTop:this.offsetTop,marginLeft:this.offsetLeft,top:this.topPosition,height:this.height,width:this.width,borderRadius:this.height/2,backgroundColor:this.nodeStyle.segmentColor,overflow:"hidden",border:"1px solid "+this.nodeStyle.borderColor}}},{key:"createInnerSliderStyle",value:function(){return{position:"absolute",top:0,let:0,margin:0,backgroundColor:this.nodeStyle.headerColor,height:"100%",width:100*this.state.fillPercentage+"%",pointerEvents:"none"}}},{key:"createInputStyle",value:function(){var e=this.props.segment.parentDimensions;return{position:"absolute",padding:0,border:0,paddingLeft:"6px",paddingRight:"6px",top:this.topPosition,marginTop:this.offsetTop,left:this.offsetLeft,height:this.height,width:this.width-12,borderRadius:e.segmentHeight/2,backgroundColor:this.nodeStyle.segmentColor,fontFamily:this.nodeStyle.fontFamily,textAlign:"center",fontWeight:this.nodeStyle.labelsFontWeight,fontSize:this.segmentStyle.fontSizeToSegmentHeight*this.props.segment.parentDimensions.segmentHeight,color:this.nodeStyle.textColor}}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[this.state.focused?Object(d.jsx)("input",{className:"NumberSegment TemporaryNumberInput",onChange:this.handleChange,type:"number",style:this.createInputStyle(),defaultValue:this.props.segment.value}):Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchDown,style:this.createSliderStyle(),children:Object(d.jsx)("div",{style:this.createInnerSliderStyle()})}),Object(d.jsx)("div",{style:this.createInputLabelStyle(),children:this.props.segment.label}),Object(d.jsx)("div",{style:this.createOutputLabelStyle(),children:this.props.segment.value})]}),this.createPort()]})}}]),n}(m),oe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i,o,s,r,a){var h;return Object(c.a)(this,n),(h=t.call(this,e,i,o)).minValue=void 0,h.maxValue=void 0,h.precision=void 0,h.minValue=s,h.maxValue=r,h.precision=Math.pow(10,a),h}return Object(h.a)(n,[{key:"createView",value:function(e,t){return Object(d.jsx)(ie,{segment:this,storage:e,currentScale:t,maxValue:this.maxValue,minValue:this.minValue,precision:this.precision},this._index)}}]),n}(v),se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i){var o;return Object(c.a)(this,n),(o=t.call(this,e,i)).capAt=void 0,o.value=void 0,o.capAt=e.segments[1].value,o.value=e.segments[2].value,o}return n}(te),re=function(){function e(){Object(c.a)(this,e),this.nodeName="Cap brightness",this.defaultDimensions=new j(180,22,26,20)}return Object(h.a)(e,[{key:"createNewNode",value:function(e,t,n){var o=new O(e,this.nodeName,t||0,n||0,this.defaultDimensions,new ae);return o.addSegment(new K("image")),o.addSegment(new $("Cap at","Max",["Max","Min"])),o.addSegment(new oe("value",255,i.INPUT,0,255,0)),o.addSegment(new J("image")),o}},{key:"loadNode",value:function(e,t){var n=new O(e,this.nodeName,t.x,t.y,t.nodeDimensions?t.nodeDimensions:this.defaultDimensions,new ae);return n.addSegment(new K("image")),n.addSegment(new $("Cap at",t.capAt,["Max","Min"])),n.addSegment(new oe("value",255,i.INPUT,0,255,0)),n.addSegment(new J("image")),n}},{key:"createNodeSave",value:function(e){return new se(e,this.defaultDimensions)}}]),e}(),ae=function(){function e(){Object(c.a)(this,e),this.imageWorker=new Y(new A(255,!0))}return Object(h.a)(e,[{key:"getNodeValue",value:function(){var e=Object(z.a)(W.a.mark((function e(t,n){var i,o,s,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.getSegmentLinks(3)[0].outputSegment,o=i.parent.getNodeValue(i.index),e.next=4,o;case 4:if((s=e.sent)instanceof ee){e.next=7;break}return e.abrupt("return",Promise.reject("input value has to be of ImageLikeData"));case 7:return r=t.segments[2].value,this.imageWorker.setParams(new A(r<0?0:r>255?255:r,"Max"===t.segments[1].value)),e.abrupt("return",this.imageWorker.run(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ce=function(){self.addEventListener("message",(function(e){var t=e.data.imageData,n=e.data.contrast,i=259*(n+255)/(255*(259-n));console.log(n),console.log(i);for(var o,s=t.length,r=0;r<s;r+=4)o=i*(t[r]-128)+128,t[r]=Math.floor(o>255?255:o>0?o:0);for(var a=1;a<s;a+=4)o=i*(t[a]-128)+128,t[a]=Math.floor(o>255?255:o>0?o:0);for(var c=2;c<s;c+=4)o=i*(t[c]-128)+128,t[c]=Math.floor(o>255?255:o>0?o:0);postMessage(t,[t.buffer])}))},he=function(){function e(){Object(c.a)(this,e),this.worker=X(ce),this._isBusy=!1,this.contrast=0}return Object(h.a)(e,[{key:"isBusy",value:function(){return this._isBusy}},{key:"run",value:function(e){var t=this;if(this._isBusy)throw new Error("Worker is busy");return new Promise((function(n,i){t.worker.onmessage=function(t){e.data=t.data,n(e)},t.worker.postMessage(t.createMessage(e),[e.data.buffer])}))}},{key:"createMessage",value:function(e){return{imageData:e.data,hasAlpha:4===e.numberOfChannels,contrast:255*this.contrast}}},{key:"setParams",value:function(e){this.contrast=e}},{key:"getParams",value:function(){return this.contrast}}]),e}(),le=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i){var o;return Object(c.a)(this,n),(o=t.call(this,e,i)).contrast=void 0,o.contrast=e.segments[1].value,o}return n}(te),ue=function(){function e(){Object(c.a)(this,e),this.nodeName="Contrast",this.defaultDimensions=new j(155,20,26,20)}return Object(h.a)(e,[{key:"createNewNode",value:function(e,t,n){var o=new O(e,"Contrast",t||0,n||0,this.defaultDimensions,new de);return o.addSegment(new K("image")),o.addSegment(new oe("Contrast",0,i.INPUT,-1,1,2)),o.addSegment(new J("image/channel")),o}},{key:"loadNode",value:function(e,t){var n=new O(e,"Contrast",0,0,t.nodeDimensions?t.nodeDimensions:this.defaultDimensions,new de);return n.addSegment(new K("image")),n.addSegment(new oe("Contrast",0,i.INPUT,-1,1,2)),n.addSegment(new J("image/channel")),n}},{key:"createNodeSave",value:function(e){return new le(e,this.defaultDimensions)}}]),e}(),de=function(){function e(){Object(c.a)(this,e),this.imageWorker=new he}return Object(h.a)(e,[{key:"getNodeValue",value:function(){var e=Object(z.a)(W.a.mark((function e(t,n){var i,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t.getSegmentLinks(2)[0].outputSegment,e.next=4,o.parent.getNodeValue(o.index);case 4:i=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject("No input"));case 10:if(!(i instanceof ee)){e.next=15;break}return this.imageWorker.setParams(t.segments[1].value),e.abrupt("return",this.imageWorker.run(i));case 15:return e.abrupt("return",Promise.reject("Input data is not image like data"));case 16:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),pe=function(){function e(){Object(c.a)(this,e),this.nodeName="Output",this.defaultDimensions=new j(130,20,26,20)}return Object(h.a)(e,[{key:"createNewNode",value:function(e,t,n){var i=new O(e,"Output",t||0,n||0,this.defaultDimensions.clone(),new fe);return i.addSegment(new J("image output")),i}},{key:"loadNode",value:function(e,t){var n=new O(e,"Output",t.x,t.y,t.nodeDimensions?t.nodeDimensions:this.defaultDimensions,new fe);return n.addSegment(new J("image output")),n}},{key:"createNodeSave",value:function(e){return new te(e,this.defaultDimensions)}}]),e}(),fe=function(){function e(){Object(c.a)(this,e)}return Object(h.a)(e,[{key:"getNodeValue",value:function(e,t){return new Promise((function(t,n){try{var i=e.getSegmentLinks(0)[0].outputSegment;i.parent.getNodeValue(i.index).then((function(e){if(e instanceof ImageData)t(e);else if(e instanceof ee){var i=new ImageData(e.data,e.width,e.height);t(i)}else n("")}))}catch(o){n(o)}}))}}]),e}(),ge=(n(100),function e(t,n,i){Object(c.a)(this,e),this.fileName=void 0,this.fileSize=void 0,this.type=void 0,this.file=null,this.fileName=t,this.fileSize=n,this.type=i}),ve=function e(){Object(c.a)(this,e),this.file=null,this.imgSrc=null},me=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;Object(c.a)(this,n),(i=t.call(this,e)).loadFile=function(e){var t=new FileReader;t.onload=function(){var e=new Image;e.onload=function(){i.setState({imgSrc:e.src});var t=document.createElement("canvas");t.height=e.height,t.width=e.width;var n=t.getContext("2d");null!==n&&(n.drawImage(e,0,0),i.props.segment.value=n.getImageData(0,0,e.width,e.height))},"string"===typeof t.result&&(e.src=t.result)},t.readAsDataURL(e)},i.handleValueChange=function(e){try{var t=e.target.files[0],n=i.props.segment;n instanceof be&&(n.fileToLoad=new ge(t.name,t.size,t.type),n.file=t),console.log(t),i.loadFile(t)}catch(o){i.setState({imgSrc:null})}i.setState({file:e.target.files[0]})},i.state=new ve;var o=i.props.segment;return o instanceof be&&null!==o.file&&(i.setState({file:o.file}),i.loadFile(o.file)),i}return Object(h.a)(n,[{key:"createInputStyle",value:function(){var e=this.props.segment.parentDimensions;return{position:"absolute",top:this.topPosition,paddingRight:"6px",width:e.width*(1-2*this.segmentStyle.percentageOffsetLeft)-6,height:e.segmentHeight*(1-2*this.segmentStyle.percentageOffsetTop),marginLeft:e.width*this.segmentStyle.percentageOffsetLeft,marginTop:e.segmentHeight*this.segmentStyle.percentageOffsetTop,color:this.nodeStyle.textColor,fontWeight:this.nodeStyle.labelsFontWeight,fontSize:e.segmentHeight*this.segmentStyle.fontSizeToSegmentHeight,userSelect:"none"}}},{key:"createLabelStyle",value:function(){var e=this.props.segment.parentDimensions;return{position:"absolute",top:this.topPosition,width:e.width*(1-2*this.segmentStyle.percentageOffsetLeft)-6,height:e.segmentHeight*(1-this.segmentStyle.percentageOffsetTop),paddingLeft:"6px",borderRadius:e.segmentHeight/2,backgroundColor:this.nodeStyle.segmentColor,marginLeft:e.width*this.segmentStyle.percentageOffsetLeft,marginTop:e.segmentHeight*this.segmentStyle.percentageOffsetTop,overflow:"hidden",textAlign:"left",whiteSpace:"nowrap",color:this.nodeStyle.textColor,fontWeight:this.nodeStyle.labelsFontWeight,fontSize:e.segmentHeight*this.segmentStyle.fontSizeToSegmentHeight}}},{key:"createCanvasStyle",value:function(){var e=this.props.segment.parentDimensions;return{position:"absolute",top:this.topPosition+e.segmentHeight,marginTop:this.offsetTop,height:2*e.segmentHeight*(1-this.segmentStyle.percentageOffsetTop),width:this.width}}},{key:"render",value:function(){var e=this.props.segment.parentDimensions;return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{onChange:this.handleValueChange,className:"fileInput",type:"file",accept:"image/*",style:this.createInputStyle()}),Object(d.jsxs)("label",{className:"fileLabel",style:this.createLabelStyle(),children:["\ud83d\uddbf ",null===this.state.file||void 0===this.state.file?this.props.segment.label:this.state.file.name]}),this.createPort(),null!==this.state.imgSrc?Object(d.jsx)("div",{style:{position:"absolute",top:this.topPosition+e.segmentHeight+this.offsetTop,left:this.offsetLeft,width:this.width,height:e.segmentHeight*(4-2*this.segmentStyle.percentageOffsetTop),pointerEvents:"none",borderRadius:this.height/2},children:Object(d.jsx)("img",{style:{margin:"2px",maxWidth:this.width-4,maxHeight:e.segmentHeight*(4-2*this.segmentStyle.percentageOffsetTop)-4,display:"block",marginLeft:"auto",marginRight:"auto",marginTop:"auto",marginBottom:"auto",borderRadius:this.height/2},src:this.state.imgSrc})}):Object(d.jsx)("div",{})]})}}]),n}(m),be=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i,o){var s;return Object(c.a)(this,n),(s=t.call(this,e,i,o,5))._fileToLoad=new ge("",0,""),s}return Object(h.a)(n,[{key:"createView",value:function(e,t){return Object(d.jsx)(me,{currentScale:t,storage:e,segment:this},this.index)}},{key:"fileToLoad",get:function(){return this._fileToLoad},set:function(e){this._fileToLoad=e}},{key:"file",get:function(){return this._fileToLoad.file},set:function(e){this._fileToLoad.file=e}}]),n}(v),we=function(e,t,n){var o=new O(e,"Image input",t||0,n||0,new j(180,20,26,0),new xe);return o.addSegment(new K("image")),o.addSegment(new be("Load input image",null,i.NO_PORT)),o},ye=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,i){var o;Object(c.a)(this,n),o=t.call(this,e,i);var s=e.segments[1];if(!(s instanceof be))throw Error();return o.fileToLoadList[0]=s.fileToLoad,o}return n}(te),je=function(){function e(){Object(c.a)(this,e),this.nodeName="Image input",this.defaultDimensions=new j(180,20,26,0)}return Object(h.a)(e,[{key:"createNewNode",value:function(e,t,n){var o=new O(e,this.nodeName,t||0,n||0,this.defaultDimensions,new xe);return o.addSegment(new K("image")),o.addSegment(new be("Load input image",null,i.NO_PORT)),o}},{key:"loadNode",value:function(e,t){var n=new O(e,this.nodeName,t.x,t.y,t.nodeDimensions?t.nodeDimensions:this.defaultDimensions,new xe);return n.addSegment(new K("image")),n.addSegment(new be("Load input image",null,i.NO_PORT)),n}},{key:"createNodeSave",value:function(e){return new ye(e,this.defaultDimensions)}}]),e}(),xe=function(){function e(){Object(c.a)(this,e)}return Object(h.a)(e,[{key:"getNodeValue",value:function(e,t){return e.segments[1].value instanceof ImageData?new Promise((function(t){var n=e.segments[1].value;t(new ee(new Uint8ClampedArray(n.data),n.width,n.height))})):Promise.reject("Image not loaded")}}]),e}(),Oe=function(e){var t=Se.get(e);if(t)return t;throw new Error},Se=new Map;!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return Se.set(e.nodeName,e)}))}(new re,new ue,new pe,new je);var ke=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).ref=s.a.createRef(),i.buttonsContent=void 0,i.createAddNodeEvent=function(e){return function(t){if(!i.ref.current)throw new Error;var n=i.props.storage,o=e.createNewNode(n.getNextNodeId()),s=i.ref.current.getBoundingClientRect(),r=i.props.viewProps,a=(t.clientX-s.left-r.width/2)/r.scale-r.shiftLeft-o.dimensions.width/2,c=(t.clientY-(s.top+s.height)-r.height/2)/r.scale-r.shiftTop-o.dimensions.headHeight/2;o.x=a,o.y=c,n.handleAddNode(o),document.body.style.cursor="auto"}},i.createButtonProps=function(){var e=[];return Se.forEach((function(t){return e.push(new R(t.nodeName,i.createAddNodeEvent(t)))})),e},i.buttonsContent=i.createButtonProps(),i}return Object(h.a)(n,[{key:"createBreakElement",value:function(){return Object(d.jsx)("div",{style:{borderLeft:"2px dotted "+Ae.headerColor,height:"85%",marginTop:"auto",marginBottom:"auto",marginLeft:"2px",marginRight:0,padding:0,width:0}})}},{key:"render",value:function(){return Object(d.jsxs)("div",{ref:this.ref,style:{position:"absolute",top:0,left:0,width:"98.5%",height:"100%",display:"flex",alignItems:"flex-start",paddingLeft:"1.5%",backgroundColor:Ae.segmentColor,fontWeight:400,boxShadow:"0 3px 3px 1px "+Ae.borderColor,zIndex:1e3},children:[this.createBreakElement(),Object(d.jsx)(U,{label:"Add new node",unfocusedOnClick:!0,subButtonsContent:this.createButtonProps()}),this.createBreakElement(),Object(d.jsx)(I,{label:"label",onClick:function(e){return console.log(e)}}),this.createBreakElement(),Object(d.jsx)(I,{label:"label",onClick:function(e){return console.log(e)}}),this.createBreakElement()]})}}]),n}(o.PureComponent),Le=function(){function e(t,n,i){if(Object(c.a)(this,e),this.nextNodeId=0,this.links=void 0,this.nodes=void 0,this.listeners=void 0,t){this.nodes=t;var o=0;t.forEach((function(e){return o=o>e.id?o:e.id})),this.nextNodeId=o+1}else this.nodes=[];n?(this.links=n,n.forEach((function(e){e.outputSegment.parent.addLink(e),e.inputSegment.parent.addLink(e)}))):this.links=[],this.listeners=i||[]}return Object(h.a)(e,[{key:"getLinks",value:function(){return this.links}},{key:"getNodes",value:function(){return this.nodes}},{key:"addUpdateListener",value:function(e){return this.listeners.push(e)}},{key:"removeUpdateListener",value:function(e){delete this.listeners[e]}},{key:"handleAddLink",value:function(e){var t=[e];this.links=t.concat(this.links),this.callListeners()}},{key:"handleAddNode",value:function(e){if(e.id===this.nextNodeId){var t=[e];this.nodes=t.concat(this.nodes),this.nextNodeId++,this.callListeners()}else{var n=!1;if(this.nodes.forEach((function(t){return n=n||t.id===e.id})),n)throw new Error("Can not add node with id with is already assigned");var i=[e];this.nodes=i.concat(this.nodes),this.nextNodeId=this.nextNodeId>e.id?this.nextNodeId:e.id+1,this.callListeners()}}},{key:"handleAttemptToAddLink",value:function(e,t,n){for(var o=null,s=this.nodes,r=0;r<s.length&&null==o;){for(var a=0;a<s[r].segments.length;a++)if(s[r].segments[a].portType===i.INPUT){var c=s[r].dimensions.segmentHeight,h=s[r].segments[a].calcPortLeftOffsetToCenter()-c/2,l=h+c,u=s[r].segments[a].calcPortTopOffsetToCenter()-c/2;if(t>=h&&t<=l&&n>=u&&n<=u+c){o=s[r].segments[a];break}}r++}if(null!=o){this.handleRemoveLinks(o);var d=new P(e,o);return e.parent.addLink(d),o.parent.addLink(d),this.links.push(d),this.callListeners(),d}return null}},{key:"handleRemoveLink",value:function(e){for(var t=this.links.filter((function(e){return null!==e})),n=0;n<t.length;n++){var i=t[n];if(i.equals(e)){i.outputSegment.parent.removeLink(i),i.inputSegment.parent.removeLink(i),delete t[n];break}}this.links=t.filter((function(e){return null!==e&&void 0!==e})),this.callListeners()}},{key:"handleRemoveLinks",value:function(e){for(var t=this.links.filter((function(e){return null!==e})),n=0;n<t.length;n++){var i=t[n];(i.inputSegment.index===e.index&&i.inputSegment.parent.id===e.parent.id||i.outputSegment.index===e.index&&i.outputSegment.parent.id===e.parent.id)&&(i.outputSegment.parent.removeLink(i),i.inputSegment.parent.removeLink(i),delete t[n])}this.links=t.filter((function(e){return null!==e&&void 0!==e})),this.callListeners()}},{key:"handleRemoveNode",value:function(e){var t=0;t="number"==typeof e?e:e.id;for(var n=0;n<this.nodes.length;n++)if(this.nodes[n].id===t){this.removeLinks(this.nodes[n].links),delete this.nodes[n];break}this.nodes=this.nodes.filter((function(e){return null!==e&&void 0!==e})),this.callListeners()}},{key:"handleUpdateNode",value:function(e){for(var t=this.nodes,n=0,i=0;i<t.length;i++)if(t[i].id===e.id){n=i;break}for(;n<t.length-1;n++)t[n]=t[n+1];t[t.length-1]=e,this.callListeners()}},{key:"getNextNodeId",value:function(){return this.nextNodeId}},{key:"callListeners",value:function(){var e=this;this.listeners.forEach((function(t){return t(e.nodes,e.links)}))}},{key:"removeLinks",value:function(e){for(var t,n=this.links,i=0;i<n.length;i++){t=n[i];for(var o=0;o<e.length;o++)if(void 0!==e[o]&&t.equals(e[o])){t.inputSegment.parent.removeLink(t),t.outputSegment.parent.removeLink(t),delete n[i],delete e[o];break}}this.links=n.filter((function(e){return null!==e&&void 0!=e}))}}]),e}(),Te=function e(t,n,i,o,s){Object(c.a)(this,e),this.scale=void 0,this.shiftTop=void 0,this.shiftLeft=void 0,this.width=void 0,this.height=void 0,this.scale=t,this.shiftTop=n,this.shiftLeft=i,this.width=o,this.height=s},Ce=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).nodeCanvasViewProps=new Te(1,0,0,0,0),i.storageListener=function(e,t){return i.setState({nodes:e,links:t})},i.storage=void 0,i.handleResizeMouseDown=function(e){var t=e.target.parentElement.getBoundingClientRect(),n=function(e){e.preventDefault();var n=(e.clientX-t.left)/t.width*100;i.setState({dividerPosition:n>100?100:n>0?n:0})};window.addEventListener("mousemove",n),window.addEventListener("mouseup",(function e(t){window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",e)}))},i.handleResizeTouchStart=function(e){var t=e.target.parentElement.getBoundingClientRect(),n=function(e){e.preventDefault();var n=(e.touches[0].screenX-t.left)/t.width*100;i.setState({dividerPosition:n>100?100:n>0?n:0})};window.addEventListener("touchmove",n),window.addEventListener("touchend",(function e(t){window.removeEventListener("touchmove",n),window.removeEventListener("touchend",e)}))},i.storage=new Le(e.nodes?e.nodes:[],e.links?e.links:[],[i.storageListener]),i.state={nodes:i.storage.getNodes(),links:i.storage.getLinks(),dividerPosition:60},i}return Object(h.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{style:{top:0,height:"100%",width:"100%",position:"relative",left:0},children:[this.props.disableControlPanel?Object(d.jsx)("div",{style:{position:"absolute",width:"100%",height:"4.5%",backgroundColor:Ae.segmentColor}}):Object(d.jsx)("div",{style:{position:"absolute",width:"100%",height:"4.5%"},children:Object(d.jsx)(ke,{storage:this.storage,viewProps:this.nodeCanvasViewProps})}),Object(d.jsx)("div",{style:{top:"4.5%",left:0,height:"95.5%",width:this.state.dividerPosition+"%",position:"absolute"},children:Object(d.jsx)(M,{storage:this.storage,viewProps:this.nodeCanvasViewProps})}),Object(d.jsx)("div",{onMouseDown:this.handleResizeMouseDown,onTouchStart:this.handleResizeTouchStart,className:"Separator",style:{height:"95.5%",width:"10px",top:"4.5%",left:this.state.dividerPosition<50?"".concat(this.state.dividerPosition,"%"):"calc(".concat(this.state.dividerPosition,"% - 10px)"),position:"absolute",overflow:"hidden",margin:0,padding:0,backgroundColor:Ae.segmentColor,boxShadow:"0 0 2px 1px "+Ae.borderColor}}),Object(d.jsx)("div",{style:{top:"4.5%",left:this.state.dividerPosition<50?"calc(".concat(this.state.dividerPosition,"% + 10px)"):"".concat(this.state.dividerPosition,"%"),width:this.state.dividerPosition<50?"calc(".concat(100-this.state.dividerPosition,"% - 10px)"):"".concat(100-this.state.dividerPosition,"%"),height:"95.5%",position:"absolute",overflow:"hidden",margin:0,padding:0},children:Object(d.jsx)(H,{nodes:this.state.nodes})})]})}}]),n}(o.Component),_e=(n(101),n(30)),Pe=n(113),Ee=n(114),De=function(e){var t=document.fullscreenElement;console.log(t),t?(console.log("quiting full screen"),document.exitFullscreen()):document.body.requestFullscreen()},Ne=function(e){return Object(d.jsx)(Ee.a,{as:_e.b,to:e.to,marginLeft:"10px",children:e.label})},Me=function(){return Object(d.jsxs)(Pe.a,{position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0,children:[Object(d.jsx)("div",{className:"Navbar",style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",margin:0,padding:0,borderBottom:"2px solid "+Ae.headerColor,boxSizing:"border-box"}}),Object(d.jsxs)("div",{style:{position:"absolute",width:"70%",height:"inherit",left:0,top:0,display:"flex",justifyContent:"flex-start",alignItems:"center",fontWeight:600,color:"#fff",fontSize:"3.5vh"},children:[Object(d.jsx)(Ne,{label:"Home",to:"/"}),Object(d.jsx)(Ne,{label:"Editor",to:"/editor"}),Object(d.jsx)(Ne,{label:"Examples",to:"/examples"})]}),Object(d.jsx)("div",{style:{position:"absolute",width:"30%",height:"inherit",left:"70%",top:0,display:"flex",justifyContent:"flex-end",alignItems:"center",fontWeight:600,color:"#fff",fontSize:"3.5vh"},children:Object(d.jsx)(Pe.a,{bg:"none",_hover:{color:Ae.headerColor,cursor:"pointer",transform:"scale(1.2)"},onClick:De,onTouchEnd:De,transition:"transform 0.3s 0s linear",margin:"15px",children:"\u2922"})})]})},He=n(13),Re=n(118),Ie=n(119),Ue=n(120),Be=n(115),Ve=n(116),We=n(117),ze=function(e){return Object(d.jsxs)(Ue.a,{width:"100%",height:"100%",children:[Object(d.jsxs)(Be.a,{width:"80%",h:"16.5%",justify:"center",align:"center",direction:"column",overflow:"auto",children:[Object(d.jsx)(Ve.a,{as:"h2",size:"xl",children:e.name}),Object(d.jsx)(We.a,{fontSize:"md",children:e.description})]}),Object(d.jsx)(Be.a,{w:"85%",h:"80%",justify:"center",align:"center",direction:"column",borderRadius:"50px",children:Object(d.jsx)(Pe.a,{margin:"20px",w:"calc(100% - 40px)",h:"calc(100% - 40px)",borderRadius:"50px",overflow:"hidden",boxShadow:"0 0 2px 4px "+Ae.borderColor,bg:Ae.backgroundColor,children:Object(d.jsx)(Ce,{disableControlPanel:!0,nodes:e.nodeModels,links:e.linkModels},e.name)})}),Object(d.jsx)(Pe.a,{width:"80%",h:"3.5%"})]})},Xe=function(e){var t=Object(He.f)(),n=t.path,i=t.url,o=Oe("Cap brightness").createNewNode(1,1,1),s=Oe("Cap brightness").createNodeSave(o);console.log(JSON.stringify(s));var r=Oe("Cap brightness").loadNode(1,s);return console.log(o),console.log(r),Object(d.jsxs)(Pe.a,{position:"absolute",top:0,left:0,width:"inherit",height:"inherit",children:[Object(d.jsxs)(Pe.a,{position:"absolute",top:0,left:"0",width:"150px",height:"inherit",bg:"#008800",children:[Object(d.jsx)(Ee.a,{as:_e.b,to:"".concat(i),children:"/"}),Object(d.jsx)("br",{}),Object(d.jsx)(Ee.a,{as:_e.b,to:"".concat(i,"/ex1"),children:"ex1"})]}),Object(d.jsx)(Pe.a,{position:"absolute",top:0,left:"150px",width:"calc(100% - 150px);",height:"inherit",bg:"#666666",children:Object(d.jsxs)(He.c,{children:[Object(d.jsx)(He.a,{exact:!0,path:"".concat(n,"/"),children:Object(d.jsx)(ze,{nodeModels:[],linkModels:[],name:"empty",description:"short description but with a lot of sense"})}),Object(d.jsx)(He.a,{exact:!0,path:"".concat(n,"/ex1"),children:Object(d.jsx)(ze,{nodeModels:[we(1)],linkModels:[],name:"ex1",description:"long description with a lot of sens and probably not a lot of anything else becouse I'm writing very\r much whatever only to test if this thin works correctly "})})]})})]})},Fe=function(){return Object(d.jsx)(Pe.a,{onTouchStart:function(e){if(1===e.touches.length)e.touches[0].screenX,e.touches[0].screenY;e.touch;console.log(e.touches[0].screenX),console.log(e.screenY),console.log(e.touches.length)},width:"100vw",height:"100vh",children:"Main page"})},Ae={backgroundColor:"#54606d",headerColor:"#299b91",borderColor:"#334447",segmentColor:"#3c454f",color:"#f7f7f7"},Ye=[we(1,-360,-60),function(e,t,n){var i=new O(e,"Output",t||0,n||0,new j(130,20,26,20),new fe);return i.addSegment(new J("image output")),i}(2,220,80),function(e,t,n){var o=new O(e,"Cap Brightness",t||0,n||0,new j(180,22,26,20),new ae);return o.addSegment(new K("image")),o.addSegment(new $("Cap at","Max",["Max","Min"])),o.addSegment(new oe("value",255,i.INPUT,0,255,0)),o.addSegment(new J("image")),o}(3,0,0),function(e,t,n){var o=new O(e,"Contrast",t||0,n||0,new j(155,20,26,20),new de);return o.addSegment(new K("image")),o.addSegment(new oe("Contrast",0,i.INPUT,-1,1,2)),o.addSegment(new J("image/channel")),o}(4,100,0)],qe=Object(Re.a)({styles:{global:{"html, body":{bg:"#54606d",fontFamily:"Ubuntu",fontWeight:300},"*, *::before, &after":{boxSizing:"content-box"}}}});var Ke=function(){return Object(d.jsx)(Ie.a,{theme:qe,children:Object(d.jsxs)(_e.a,{children:[Object(d.jsx)("div",{style:{position:"absolute",top:0,height:"7vh",width:"100vw",margin:0,padding:0},children:Object(d.jsx)(Me,{})}),Object(d.jsxs)(He.c,{children:[Object(d.jsx)(He.a,{exact:!0,path:"/",children:Object(d.jsx)(Fe,{})}),Object(d.jsx)(He.a,{path:"/editor",children:Object(d.jsx)("div",{style:{position:"absolute",margin:0,marginTop:"7vh",height:"93vh",width:"100vw",padding:0},children:Object(d.jsx)(Ce,{nodes:Ye})})}),Object(d.jsx)(He.a,{path:"/examples",children:Object(d.jsx)("div",{style:{position:"absolute",margin:0,marginTop:"7vh",height:"93vh",width:"100vw",padding:0},children:Object(d.jsx)(Xe,{})})})]})]})})},Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,121)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),s(e),r(e)}))};a.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(Ke,{})}),document.getElementById("root")),Ge()},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.c0dd159a.chunk.js.map